const listadoCRUD_RSS=document.getElementsByClassName("listaRSS"),listadoNoticias=document.getElementById("listadoNoticias"),siteName=document.getElementById("actualizar");let globalVal="";var ultimaNoticiaVista;window.onload=verCrudRSS();function peticion(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==this.readyState&&200==this.status&&(globalVal=this.responseText)};b.open("GET",a,!1);b.send()}
function noticiasIniciales(){if(0!=document.getElementsByClassName("btnEnlace").length){peticion("mostrarNoticias.php");let a=JSON.parse(globalVal);siteName.innerHTML="Actualizar noticias";listadoNoticias.innerHTML=a.noticias}else listadoNoticias.innerHTML="<h1>Nada nuevo...<h1>"}function actualizarNoticias(){peticion("actualizarRSS.php?q="+siteName.textContent);peticion("mostrarNoticias.php");let a=JSON.parse(globalVal);listadoNoticias.innerHTML=a.noticias}
function addURL(){let a=document.getElementById("agregarURL").value;peticion("agregarRSS.php?q="+a);location.reload()}function agregarEventoEliminar(){const a=document.getElementsByClassName("btnEliminar");for(let b=0;b<a.length;b++)a[b].addEventListener("click",eliminarURL)}function agregarEventoMostrar(){const a=document.getElementsByClassName("btnEnlace");for(let b=0;b<a.length;b++)a[b].addEventListener("click",mostrarNoticias)}
function eliminarURL(){peticion("eliminarRSS.php?q="+this.parentNode.childNodes[3].textContent);location.reload()}function mostrarNoticias(){peticion("mostrarNoticias.php");let a=JSON.parse(globalVal);siteName.innerHTML="Resultados";listadoNoticias.innerHTML=a.noticias}
function buscar(){var a=document.getElementById("buscador").value;peticion("mostrarNoticias.php?p="+a);a=globalVal;null!=a?(a=JSON.parse(globalVal),siteName.innerHTML="Resultados",listadoNoticias.innerHTML=a.noticias):alert("No existe ninguna noticia que coincida")}function ordenar(){var a=document.getElementById("agruparPor").value;peticion("mostrarNoticias.php?q="+a);a=JSON.parse(globalVal);listadoNoticias.innerHTML=a.noticias}
function verCrudRSS(){peticion("verCrudRSS.php");let a=globalVal;a?(a=JSON.parse(globalVal),listadoCRUD_RSS[0].innerHTML=a.enlace,agregarEventoMostrar(),agregarEventoEliminar(),noticiasIniciales()):console.log("Sin noticias")};
